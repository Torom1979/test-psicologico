{% extends 'psicologos/base.html' %}
{% block page_content %}

<title>Tests Psicológicos</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

<script>
    function generarLink(slug) {
        fetch(`/tests/generar_link/${slug}/`)
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    alert(data.error);
                } else {
                    document.getElementById("link-" + slug).value = data.link;
                }
            });
    }
</script>

</head>
<body class="container mt-4">
    <h1 class="text-center mb-4">Generar Link para Tests Psicológicos</h1>
    
    <div class="row">
        {% for test in tests %}
        <div class="col-md-6 mb-3">
            <div class="card shadow">
                <div class="card-body text-center">
                    <h4>{{ test.nombre }}</h4>
                    <button class="btn btn-primary mt-2" onclick="generarLink('{{ test.slug }}')">Generar Link</button>
                    <input type="text" id="link-{{ test.slug }}" class="form-control mt-2 text-center" readonly>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

{% endblock %}
{% block js_page %}
{% endblock %}
